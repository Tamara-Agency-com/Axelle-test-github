"use strict";(self.webpackChunktipoBooking=self.webpackChunktipoBooking||[]).push([[18],{225:(e,t,a)=>{a.d(t,{BE:()=>l,lb:()=>i,V$:()=>n,Ds:()=>o,wY:()=>s,LU:()=>r,Ql:()=>c});const l=(e,t)=>{e.parentNode.insertBefore(t,e.nextSibling)},i=function(e,t){"string"==typeof e&&(e=e.replace(".",""));var a="",l=/\{\{\s*(\w+)\s*\}\}/,i=t||Tipo&&Tipo.Booking&&Tipo.Booking.money_format||"${{amount}}";function n(e,t){return void 0===e?t:e}function o(e,t,a,l){if(t=n(t,2),a=n(a,","),l=n(l,"."),isNaN(e)||null==e)return 0;var i=(e=(e/100).toFixed(t)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(i[1]?l+i[1]:"")}switch(i.match(l)[1]){case"amount":a=o(e,2);break;case"amount_no_decimals":a=o(e,0);break;case"amount_with_comma_separator":a=o(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=o(e,0,".",",");break;case"amount_no_decimals_with_space_separator":a=o(e,0,"."," ")}return i.replace(l,a)},n=(e,t)=>e&&e!=document?e.classList.contains(t)?e:n(e.parentNode,t):null,o=(e,t,a)=>{var l;return function(){var i=this,n=arguments,o=function(){l=null,a||e.apply(i,n)},s=a&&!l;clearTimeout(l),l=setTimeout(o,t),s&&e.apply(i,n)}},s=function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="ÁÄÂÀÃÅČÇĆĎÉĚËÈÊẼĔȆÍÌÎÏŇÑÓÖÒÔÕØŘŔŠŤÚŮÜÙÛÝŸŽáäâàãåčçćďéěëèêẽĕȇíìîïňñóöòôõøðřŕšťúůüùûýÿžþÞĐđßÆa·/_,:;",a=0,l=t.length;a<l;a++)e=e.replace(new RegExp(t.charAt(a),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(a));return e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},r=function(e,t){let a=t&&t.duration_unit||"minutes",l=t&&t.duration_unit_hours,i=e+" "+a;if(l){const t=parseInt(e)/60,n=Math.floor(t),o=60*(t-n),s=Math.round(o);n>0&&(i=n+" "+l,s&&(i+=", "+s+" "+a))}return i},c=function(e){const t=[{value:"Etc/GMT+12",label:"(GMT-12:00) International Date Line West"},{value:"Pacific/Pago_Pago",label:"(GMT-11:00) American Samoa"},{value:"Pacific/Midway",label:"(GMT-11:00) Midway Island"},{value:"Pacific/Honolulu",label:"(GMT-10:00) Hawaii"},{value:"America/Juneau",label:"(GMT-09:00) Alaska"},{value:"America/Los_Angeles",label:"(GMT-08:00) Pacific Time (US & Canada)"},{value:"America/Tijuana",label:"(GMT-08:00) Tijuana"},{value:"America/Phoenix",label:"(GMT-07:00) Arizona"},{value:"America/Chihuahua",label:"(GMT-07:00) Chihuahua"},{value:"America/Mazatlan",label:"(GMT-07:00) Mazatlan"},{value:"America/Denver",label:"(GMT-07:00) Mountain Time (US & Canada)"},{value:"America/Guatemala",label:"(GMT-06:00) Central America"},{value:"America/Chicago",label:"(GMT-06:00) Central Time (US & Canada)"},{value:"America/Mexico_City",label:"(GMT-06:00) Guadalajara, Mexico City"},{value:"America/Monterrey",label:"(GMT-06:00) Monterrey"},{value:"America/Regina",label:"(GMT-06:00) Saskatchewan"},{value:"America/Bogota",label:"(GMT-05:00) Bogota"},{value:"America/New_York",label:"(GMT-05:00) Eastern Time (US & Canada)"},{value:"America/Indiana/Indianapolis",label:"(GMT-05:00) Indiana (East)"},{value:"America/Lima",label:"(GMT-05:00) Lima, Quito"},{value:"America/Halifax",label:"(GMT-04:00) Atlantic Time (Canada)"},{value:"America/Caracas",label:"(GMT-04:00) Caracas"},{value:"America/Guyana",label:"(GMT-04:00) Georgetown"},{value:"America/La_Paz",label:"(GMT-04:00) La Paz"},{value:"America/Puerto_Rico",label:"(GMT-04:00) Puerto Rico"},{value:"America/Santiago",label:"(GMT-04:00) Santiago"},{value:"America/St_Johns",label:"(GMT-03:30) Newfoundland"},{value:"America/Sao_Paulo",label:"(GMT-03:00) Brasilia"},{value:"America/Argentina/Buenos_Aires",label:"(GMT-03:00) Buenos Aires"},{value:"America/Godthab",label:"(GMT-03:00) Greenland"},{value:"America/Montevideo",label:"(GMT-03:00) Montevideo"},{value:"Atlantic/South_Georgia",label:"(GMT-02:00) Mid-Atlantic"},{value:"Atlantic/Azores",label:"(GMT-01:00) Azores"},{value:"Atlantic/Cape_Verde",label:"(GMT-01:00) Cape Verde Is."},{value:"Europe/London",label:"(GMT+00:00) Edinburgh, London"},{value:"Europe/Lisbon",label:"(GMT+00:00) Lisbon"},{value:"Africa/Monrovia",label:"(GMT+00:00) Monrovia"},{value:"Etc/UTC",label:"(GMT+00:00) UTC"},{value:"Europe/Amsterdam",label:"(GMT+01:00) Amsterdam"},{value:"Europe/Belgrade",label:"(GMT+01:00) Belgrade"},{value:"Europe/Berlin",label:"(GMT+01:00) Berlin"},{value:"Europe/Zurich",label:"(GMT+01:00) Bern, Zurich"},{value:"Europe/Bratislava",label:"(GMT+01:00) Bratislava"},{value:"Europe/Brussels",label:"(GMT+01:00) Brussels"},{value:"Europe/Budapest",label:"(GMT+01:00) Budapest"},{value:"Africa/Casablanca",label:"(GMT+01:00) Casablanca"},{value:"Europe/Copenhagen",label:"(GMT+01:00) Copenhagen"},{value:"Europe/Dublin",label:"(GMT+00:00) Dublin"},{value:"Europe/Ljubljana",label:"(GMT+01:00) Ljubljana"},{value:"Europe/Madrid",label:"(GMT+01:00) Madrid"},{value:"Europe/Paris",label:"(GMT+01:00) Paris"},{value:"Europe/Prague",label:"(GMT+01:00) Prague"},{value:"Europe/Rome",label:"(GMT+01:00) Rome"},{value:"Europe/Sarajevo",label:"(GMT+01:00) Sarajevo"},{value:"Europe/Skopje",label:"(GMT+01:00) Skopje"},{value:"Europe/Stockholm",label:"(GMT+01:00) Stockholm"},{value:"Europe/Vienna",label:"(GMT+01:00) Vienna"},{value:"Europe/Warsaw",label:"(GMT+01:00) Warsaw"},{value:"Africa/Algiers",label:"(GMT+01:00) West Central Africa"},{value:"Europe/Zagreb",label:"(GMT+01:00) Zagreb"},{value:"Europe/Athens",label:"(GMT+02:00) Athens"},{value:"Europe/Bucharest",label:"(GMT+02:00) Bucharest"},{value:"Africa/Cairo",label:"(GMT+02:00) Cairo"},{value:"Africa/Harare",label:"(GMT+02:00) Harare"},{value:"Europe/Helsinki",label:"(GMT+02:00) Helsinki"},{value:"Asia/Jerusalem",label:"(GMT+02:00) Jerusalem"},{value:"Europe/Kaliningrad",label:"(GMT+02:00) Kaliningrad"},{value:"Europe/Kiev",label:"(GMT+02:00) Kyiv"},{value:"Africa/Johannesburg",label:"(GMT+02:00) Pretoria"},{value:"Europe/Riga",label:"(GMT+02:00) Riga"},{value:"Europe/Sofia",label:"(GMT+02:00) Sofia"},{value:"Europe/Tallinn",label:"(GMT+02:00) Tallinn"},{value:"Europe/Vilnius",label:"(GMT+02:00) Vilnius"},{value:"Asia/Baghdad",label:"(GMT+03:00) Baghdad"},{value:"Europe/Istanbul",label:"(GMT+03:00) Istanbul"},{value:"Asia/Kuwait",label:"(GMT+03:00) Kuwait"},{value:"Europe/Minsk",label:"(GMT+03:00) Minsk"},{value:"Europe/Moscow",label:"(GMT+03:00) Moscow, St. Petersburg"},{value:"Africa/Nairobi",label:"(GMT+03:00) Nairobi"},{value:"Asia/Riyadh",label:"(GMT+03:00) Riyadh"},{value:"Asia/Tehran",label:"(GMT+03:30) Tehran"},{value:"Asia/Muscat",label:"(GMT+04:00) Abu Dhabi, Muscat"},{value:"Asia/Baku",label:"(GMT+04:00) Baku"},{value:"Europe/Samara",label:"(GMT+04:00) Samara"},{value:"Asia/Tbilisi",label:"(GMT+04:00) Tbilisi"},{value:"Europe/Volgograd",label:"(GMT+03:00) Volgograd"},{value:"Asia/Yerevan",label:"(GMT+04:00) Yerevan"},{value:"Asia/Kabul",label:"(GMT+04:30) Kabul"},{value:"Asia/Yekaterinburg",label:"(GMT+05:00) Ekaterinburg"},{value:"Asia/Karachi",label:"(GMT+05:00) Islamabad, Karachi"},{value:"Asia/Tashkent",label:"(GMT+05:00) Tashkent"},{value:"Asia/Kolkata",label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi"},{value:"Asia/Colombo",label:"(GMT+05:30) Sri Jayawardenepura"},{value:"Asia/Kathmandu",label:"(GMT+05:45) Kathmandu"},{value:"Asia/Almaty",label:"(GMT+06:00) Almaty"},{value:"Asia/Dhaka",label:"(GMT+06:00) Astana, Dhaka"},{value:"Asia/Urumqi",label:"(GMT+06:00) Urumqi"},{value:"Asia/Rangoon",label:"(GMT+06:30) Rangoon"},{value:"Asia/Bangkok",label:"(GMT+07:00) Bangkok, Hanoi"},{value:"Asia/Jakarta",label:"(GMT+07:00) Jakarta"},{value:"Asia/Krasnoyarsk",label:"(GMT+07:00) Krasnoyarsk"},{value:"Asia/Novosibirsk",label:"(GMT+07:00) Novosibirsk"},{value:"Asia/Shanghai",label:"(GMT+08:00) Beijing"},{value:"Asia/Chongqing",label:"(GMT+08:00) Chongqing"},{value:"Asia/Hong_Kong",label:"(GMT+08:00) Hong Kong"},{value:"Asia/Irkutsk",label:"(GMT+08:00) Irkutsk"},{value:"Asia/Kuala_Lumpur",label:"(GMT+08:00) Kuala Lumpur"},{value:"Australia/Perth",label:"(GMT+08:00) Perth"},{value:"Asia/Singapore",label:"(GMT+08:00) Singapore"},{value:"Asia/Taipei",label:"(GMT+08:00) Taipei"},{value:"Asia/Ulaanbaatar",label:"(GMT+08:00) Ulaanbaatar"},{value:"Asia/Tokyo",label:"(GMT+09:00) Osaka, Sapporo, Tokyo"},{value:"Asia/Seoul",label:"(GMT+09:00) Seoul"},{value:"Asia/Yakutsk",label:"(GMT+09:00) Yakutsk"},{value:"Australia/Adelaide",label:"(GMT+09:30) Adelaide"},{value:"Australia/Darwin",label:"(GMT+09:30) Darwin"},{value:"Australia/Brisbane",label:"(GMT+10:00) Brisbane"},{value:"Australia/Melbourne",label:"(GMT+10:00) Canberra, Melbourne"},{value:"Pacific/Guam",label:"(GMT+10:00) Guam"},{value:"Australia/Hobart",label:"(GMT+10:00) Hobart"},{value:"Pacific/Port_Moresby",label:"(GMT+10:00) Port Moresby"},{value:"Australia/Sydney",label:"(GMT+10:00) Sydney"},{value:"Asia/Vladivostok",label:"(GMT+10:00) Vladivostok"},{value:"Asia/Magadan",label:"(GMT+11:00) Magadan"},{value:"Pacific/Noumea",label:"(GMT+11:00) New Caledonia"},{value:"Pacific/Guadalcanal",label:"(GMT+11:00) Solomon Is."},{value:"Asia/Srednekolymsk",label:"(GMT+11:00) Srednekolymsk"},{value:"Pacific/Auckland",label:"(GMT+12:00) Auckland, Wellington"},{value:"Pacific/Fiji",label:"(GMT+12:00) Fiji"},{value:"Asia/Kamchatka",label:"(GMT+12:00) Kamchatka"},{value:"Pacific/Majuro",label:"(GMT+12:00) Marshall Is."},{value:"Pacific/Chatham",label:"(GMT+12:45) Chatham Is."},{value:"Pacific/Tongatapu",label:"(GMT+13:00) Nuku'alofa"},{value:"Pacific/Apia",label:"(GMT+13:00) Samoa"},{value:"Pacific/Fakaofo",label:"(GMT+13:00) Tokelau Is."}].find((t=>t.value===e));return t?t.label:e}},622:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s}),a(868);var l=a(225);const i=a(723);i.filters.define("format_timezone",l.Ql),i.templates={widget:'\n<div class="tpb-box-wrapper" data-step="1">\n    <div class="tpb-box">\n        <div class="spinner">\n            <div class="lds-ellipsis">\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n            </div>\n        </div>\n        <form class="tpb-form" novalidate>\n            <div class="content" data-step="1">\n                <input type="hidden" class="timeSlots" value=""/>\n                <input type="hidden" class="shopId" name="shopId" value="{{it.tpbShopId}}"/>\n                <input type="hidden" class="duration" name="duration" value=""\n                    data-label="{{it.tpbText.duration}}"/>\n                <input type="hidden" class="datetime" name="datetime" value=""\n                    data-label="{{it.tpbText.datetime}}"/>\n                <textarea class="hidden extraFieldSets" style="display:none;"></textarea>\n                <div class="step1">\n                    <div class="inner-step">\n                        <h5>{{*it.tpbText.please_select}}</h5>\n                        <div class="tpb-form-control product visible">\n                            <label for="product">{{*it.tpbText.product}}</label>\n                            <select class="slim-select tpb-select-product"\n                                    placeholder="{{it.tpbText.product_placeholder}}" name="productId"\n                                    data-label="{{*it.tpbText.product}}">\n                                <option data-placeholder="true" value>{{it.tpbText.product_placeholder}}</option>\n                                {{@foreach(it.products) => key, product}}\n                                    <option value="{{product.id}}" data-handle="{{product.handle}}">{{product.title}}</option>\n                                {{/foreach}}\n                            </select>\n                        </div>\n                        <div class="tpb-form-control variant">\n                            <div class="tpb-form-control-option tpb-option-1">\n                                <label for="option-1" class="tpb-label-option1"></label>\n                                <select class="slim-select tpb-select-option tpb-select-option-1"\n                                        placeholder="{{it.tpbText.variant_placeholder}}" name="option1"\n                                        data-label="option1">\n                                    <option data-placeholder="true"/>\n                                </select>\n                            </div>\n                            <div class="tpb-form-control-option tpb-option-2">\n                                <label for="option-2" class="tpb-label-option2"></label>\n                                <select class="slim-select tpb-select-option tpb-select-option-2"\n                                        placeholder="{{it.tpbText.variant_placeholder}}" name="option2"\n                                        data-label="option2">\n                                    <option data-placeholder="true"/>\n                                </select>\n                            </div>\n                            <div class="tpb-form-control-option tpb-option-3">\n                                <label for="option-3" class="tpb-label-option3"></label>\n                                <select class="slim-select tpb-select-option tpb-select-option-3  "\n                                        placeholder="{{it.tpbText.variant_placeholder}}" name="option3"\n                                        data-label="option3">\n                                    <option data-placeholder="true"/>\n                                </select>\n                            </div>\n\n                        </div>\n                        <div class="tpb-form-control employee {{! !it.settings.general.multipleEmployees && \'tbp-hidden\' }}">\n                            <label for="product">{{*it.tpbText.employee}}</label>\n                            <select class="slim-select tpb-select-employee"\n                                    placeholder="{{it.tpbText.employee_placeholder}}" name="employeeId"\n                                    data-label="{{*it.tpbText.employee}}">\n                                <option data-placeholder="true"></option>\n                            </select>\n                        </div>\n                        <div class="tpb-form-control location {{ (!it.settings.general.multipleLocations || it.settings.general.show_location_on_front_store === false) && \'tbp-hidden\' }}">\n                            <label>{{*it.tpbText.location}}</label>\n                            <select class="slim-select tpb-select-location"\n                                    placeholder="{{it.tpbText.location_placeholder}}" name="locationId"\n                                    data-label="{{*it.tpbText.location}}">\n                                <option data-placeholder="true"></option>\n                            </select>\n                        </div>\n                        {{@if(it.settings.general.allow_bring_more)}}\n                        <div class="tpb-form-control visible" style="display:none">\n                            <label class="inline" for="bring_qty">\n                                <span>{{*it.tpbText.bringing_anyone}}</span>\n                                <label class="switch">\n                                    <input type="checkbox" class="bringToggle">\n                                    <span class="tpb-slider round"></span>\n                                </label>\n                            </label>\n                        </div>\n                        <div class="tpb-form-control bringQty">\n                            <label for="product">{{*it.tpbText.num_of_additional}}</label>\n                            <input class="bringQty-input" type="text" id="bring_qty" name="bring_qty" data-label="{{it.tpbText.num_of_additional}}" value min="1"/>\n                            <p id="tpb-message-bring_qty"></p>\n                        </div>\n                        {{/if}}\n                        <div class="tpb-form-control price" >\n                            <p>{{*it.tpbText.price}} : <span class="tpb-text-price"/></p>\n                        </div>\n                        <div class="tpb-form-control booking-note">\n                            <p></p>\n                        </div>\n                        <div class="action">\n                            <button disabled type="button" class="continue-button c1">\n                                {{*it.tpbText.continue}}\n                            </button>\n                        </div>\n                        <div class="tpb-message_not-available">\n                            <div class="content">{{*it.tpbText.not_available}}</div>\n                            <div class="dismiss">\n                                <svg viewBox="0 0 20 20" class="" focusable="false" aria-hidden="true">\n                                    <path\n                                        d="M11.414 10l4.293-4.293a.999.999 0 1 0-1.414-1.414L10 8.586 5.707 4.293a.999.999 0 1 0-1.414 1.414L8.586 10l-4.293 4.293a.999.999 0 1 0 1.414 1.414L10 11.414l4.293 4.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L11.414 10z"\n                                        fill-rule="evenodd"></path>\n                                </svg>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="step2">\n                    <div class="inner-step">\n                        <input type="hidden" name="date" class="date" data-label="{{it.tpbText.date}}"/>\n                        <div class="tpb-datepicker"></div>\n                        <div class="timezone-note" >\n                            <div class="timezone-icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="globe-americas" class="svg-inline--fa fa-globe-americas fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"></path></svg></div>\n                            <div class="timezone-text">{{it.tpbTimeZoneShop | format_timezone}}<span class="currentTime"></span></div>\n                        </div>\n                        <div class="tpb-timepicker">\n                        </div>\n                    </div>\n                    <div class="action">\n                        <button type="button" class="back-button c2">{{*it.tpbText.back}}</button>\n                        <button disabled type="button" class="continue-button c2">\n                            {{*it.tpbText.continue}}\n                        </button>\n                    </div>\n                </div>\n                <div class="step3">\n\n                </div>\n            </div>\n        </form>\n    </div>\n    {{@if(it.settings.general.remove_copyright !== true && !it.isPaidPlan)}}\n    <div class="copyright" style="display:block !important">\n        <p>Made by <a href="//apps.shopify.com/tipo-appointment-booking" rel="nofollow" attribute target="_blank"><span class="company">Tipo Appointment Booking</span></a></p>\n    </div>\n    {{/if}}\n    </div>\n'};const n=i;var o=a(466);const s={initCalendar:async function(e){const t=this;let i=document.querySelector("#tpb-booking-form")?document.querySelector("#tpb-booking-form").innerHTML:"";if(i||(i=n.templates.widget),1==this.configs.products.length&&this.settings.general?.auto_continue_step&&"product"!=this.page.type){const e=this.configs.products[0].handle;let a=window.location.origin+"/products/"+e+".json";await fetch(a).then((e=>e.json())).then((e=>{t.product=e.product}))}const o=n.render(i,{products:this.configs.products,tpbShopId:this.shop.id,isPaidPlan:parseFloat(this.shop.plan.price)>0||"BETA"===this.shop.plan.plan,settings:this.settings,tpbText:this.trans,isProductPage:!0,tpbProduct:t.product,tpbTimeZoneShop:this.timezone.shop}),s=!(1!=this.configs.products.length||!this.settings.general?.auto_continue_step||"product"==this.page.type)||!e.classList.contains("page"),r=e.parentNode.querySelector(".tpb-booking-form");r&&(r.innerHTML="");const c=document.createElement("div");c.innerHTML=o,c.className=s?"tpb-booking-form product":"tpb-booking-form page",(0,l.BE)(e,c),document.body.className+=" booking-widget-appended";const u=c.querySelector(".continue-button.c1");s&&(2!=this.settings.general.hide_add_to_cart&&1!=this.settings.general.hide_add_to_cart||document.querySelectorAll('.tpb-atc-add_to_cart,.tpb-atc-wrapper,form[action*="cart"] [type="submit"]').forEach((e=>e.style.display="none")),2!=this.settings.general.hide_buy_now&&1!=this.settings.general.hide_buy_now||document.querySelectorAll(".tpb-atc-buy_now,.shopify-payment-button").forEach((e=>e.style.display="none")),2!=this.settings.general.hide_product_form&&1!=this.settings.general.hide_product_form||document.querySelectorAll('.tpb-product-form,form[action*="cart"]:not(.tpb-exclude)').forEach((e=>e.style.display="none")),this.hideDropdownService(this.settings.general,c),this.autoNextStep(this.settings.general,u)),this.tooglePriceBooking(this.settings.general,c),this.handleOptionElement(c),u.addEventListener("click",(()=>{const e=this.getParameters(c),t=[Promise.all([a.e(788),a.e(326),a.e(321),a.e(267)]).then(a.bind(a,510)),this.getSlots(c,e)];Promise.all(t).then((e=>{const{default:t}=e[0];Object.assign(this,t),document.dispatchEvent(new CustomEvent("tipo:booking:loaded")),this.goToCalendar(c,e[1]),this.goToStep(c,2)}))})),window.addEventListener("resize",(e=>{const t=c.offsetWidth,a=e.target.innerWidth;t<=599&&a>t?c.classList.add("x480"):c.classList.remove("x480")})),window.dispatchEvent(new Event("resize")),document.dispatchEvent(new CustomEvent("tipo:booking:loaded"))},handleOptionElement:function(e){const t=e.querySelector(".tpb-select-product"),a=e.querySelectorAll("select.tpb-select-option"),i=e.querySelector(".tpb-select-location"),n=e.querySelector(".tpb-select-employee"),s=e.querySelector(".bringToggle"),r=e.querySelector(".bringQty"),c=e.querySelector(".bringQty-input"),u=new o.Z({select:t});let p={variants:[],employee:null,location:null};const{multipleLocations:d,multipleEmployees:b}=this.settings.general,v=t=>{const a=e.querySelector('[name="productId"]').value,i=this.productApi[a],n=e.querySelectorAll("select.tpb-select-option"),o=e.querySelector(".tpb-message_not-available"),r=e.querySelector(".tpb-form-control.price"),u=r.querySelector(".tpb-text-price"),p=Array.from(n).reduce(((e,t)=>(t.value&&e.push(t.value),e)),[]);let d=i.variants.find((e=>e.options.toString()==p.toString()));1==i.variants.length&&"Default Title"==i.variants[0].options[0]&&(d=i.variants[0]),this.selectedVariant=d,d&&d.available?(d.price?(u.innerHTML=(0,l.lb)(d.price),r.style.display="block"):r.style.display="none",o.style.display="none"):(r.style.display="none",o.style.display="flex");const b=this.getAvailableCapacity(e),v=s&&(0,l.V$)(s,"tpb-form-control");v&&(v.style.display=0==b?"none":"block"),c&&c.dispatchEvent(new Event("change"));const h=this.configs.products.find((e=>e.id==a)).duration;this.updateDuration(e,h)},h=e=>{e.stopPropagation(),(0,l.V$)(e.target,"tpb-message_not-available").style.display="none"},g=(0,l.Ds)((async e=>{const t=(0,l.V$)(e.target,"tpb-box"),a=this.getParameters(t),{productId:i,locationId:n,employeeId:o,bringQty:s}=a,r=this.configs.products.find((e=>e.id==i));let c=i&&!0;if(c=c&&this.selectedVariant&&this.selectedVariant.available,"1"==this.settings.general.multipleEmployees&&"product"!==r.available_time_basis&&(c=c&&!isNaN(o)),"1"==this.settings.general.multipleLocations&&(c=c&&!isNaN(n)),s){const e=this.getAvailableCapacity(t);c=c&&s<=e}const u=t.querySelector(".step1 .continue-button");if(c?u.removeAttribute("disabled"):u.setAttribute("disabled","disabled"),2==this.getStep(t)&&(this.unsetSlots(t),c)){const e=await this.getSlots(t,a);this.goToCalendar(t,e)}return document.dispatchEvent(new CustomEvent("tipo:booking:options:update")),c}),150);if(t.addEventListener("change",(async t=>{p.location&&p.location.set(""),p.employee&&p.employee.set("");const a=this.configs.products.find((e=>e.id==t.target.value)),l="/products/"+a.handle+"?view=tipo_booking_raw_data_do_not_select";this.setLoading(e,!0);const o=await fetch(l).then((t=>(this.setLoading(e,!1),t.text())));new Function(o)(),this.productApi=this.productApi||{},this.productApi[t.target.value]=tpbProductApi,a.is_free&&e.closest(".tpbOnlineBooking_container")?e.closest(".tpbOnlineBooking_container").classList.add("isFree"):e.closest(".tpbOnlineBooking_container")&&e.closest(".tpbOnlineBooking_container").classList.remove("isFree"),this.buildOptionSelectors(e,tpbProductApi,p.variants),i.parentNode.style.display="none",n.parentNode.style.display="none","1"==b&&"product"!==a.available_time_basis?this.buildEmployeeSelector(a,p,n):"1"==d&&this.buildLocationSelector(a,null,p,i);const s=a.duration;this.updateDuration(e,s);const r=e.querySelector(".booking-note");r&&(r.innerHTML=a.note,r.style.display="block")})),a.forEach((e=>e.addEventListener("change",v))),n.addEventListener("change",(e=>{const a=this.configs.products.find((e=>e.id==t.value)),l=this.configs.employees.find((t=>t.id==e.target.value));l&&this.buildLocationSelector(a,l,p,i)})),s&&s.addEventListener("change",(e=>{r.style.display=e.target.checked?"block":"none",e.target.checked||(r.querySelector('[name="bring_qty"]').value="",r.querySelector('[name="bring_qty"]').removeAttribute("value"))})),c&&c.addEventListener("change",(e=>{const t=e.target.value,a=(0,l.V$)(e.target,"tpb-box"),i=this.getAvailableCapacity(a);a.querySelector("#bring_qty").setAttribute("max",i);const n=a.querySelector("#tpb-message-bring_qty");if(t>i){const e=this.trans.you_can_only_bring.replace("{number}",i);n.innerHTML=e}else n.innerHTML=""})),e.querySelectorAll("select,input").forEach((e=>{e.addEventListener("change",g)})),e.querySelectorAll(".dismiss").forEach((e=>{e.addEventListener("click",h)})),this.product){const a=t.querySelector('option[value="'+this.product.id+'"]'),l=e.classList.contains("product");a&&l&&(u.set(this.product.id),t.dispatchEvent(new Event("change")),u.disable())}},setLoading:function(e,t){const a=e.querySelector(".spinner");t?a.classList.add("loading"):a.classList.remove("loading")},updateDuration:function(e,t){const a=e.querySelector(".duration");if("product"==t.type&&(a.value=t.rule),"variant"==t.type&&this.selectedVariant){let e;e=t.option?t.rule.find((e=>this.selectedVariant.title.indexOf(e.value)>-1)):t.rule.find((e=>e.value==this.selectedVariant.id)),a.value=e&&e.duration}},getStep:function(e){return parseInt(e.querySelector(".content[data-step]").getAttribute("data-step"))},goToStep:function(e,t){const a=(0,l.V$)(e,"tpb-booking-form"),i=a.classList.contains("x480");e.querySelector(".content[data-step]").setAttribute("data-step",t),e.querySelector(".tpb-box-wrapper").setAttribute("data-step",t);const n=e.querySelector(".continue-button.c"+(t-1)),o=e.querySelector(`.continue-button.c${t}`),s=e.querySelector(`.back-button.c${t}`);s&&(s.style.display=i||3==t?"block":"none"),n&&(n.style.display="none"),o&&(o.style.display="block"),3==t&&a.closest(".tpbOnlineBooking_container.isFree")?a.closest(".tpbOnlineBooking_container.isFree").querySelector(".tpbOnlineBooking_form").style.display="none":a.closest(".tpbOnlineBooking_container.isFree")&&(a.closest(".tpbOnlineBooking_container.isFree").querySelector(".tpbOnlineBooking_form").style.display="block"),document.dispatchEvent(new CustomEvent("tipo.booking.next.step",{detail:{form:a,step:t,button:o}}))},getParameters:function(e){const t=new Date,a=e.querySelector('[name="productId"]').value,l=e.querySelector('[name="employeeId"]').value,i=e.querySelector('[name="locationId"]').value,n=e.querySelector(".bringToggle")&&e.querySelector(".bringToggle").checked,o=e.querySelector('[name="bring_qty"]')&&e.querySelector('[name="bring_qty"]').value,s=t.getFullYear()+"-"+(parseInt(t.getMonth())+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes(),r={shop:this.shop.url,productId:a,variantId:this.selectedVariant&&this.selectedVariant.id,employeeId:l,locationId:i,customerIds:this.customer&&this.customer.id,currentDay:s};return n&&parseInt(o)&&(r.bringQty=parseInt(o)),r},getSlots:function(e,t){this.setLoading(e,!0);const a=new URLSearchParams(t);return fetch(`${this.appUrl}/booking_api/slots?${a.toString()}`).then((t=>(this.setLoading(e,!1),t.json())))},buildOptionSelectors:function(e,t,a){const l=t.options;if(l.length>0&&"Default Title"!==l[0].values[0]){if(this.buildSingleOptionSelector(e,l,a,1),l.length>1)if(this.buildSingleOptionSelector(e,l,a,2),l.length>2)this.buildSingleOptionSelector(e,l,a,3);else{const t=e.querySelector(".tpb-form-control-option.tpb-option-3"),a=t.querySelector("select.tpb-select-option-3");t.style.display="none",a.value="",a.dispatchEvent(new Event("change"))}else{const t=e.querySelector(".tpb-form-control-option.tpb-option-2"),a=t.querySelector("select.tpb-select-option-2");t.style.display="none",a.value="",a.dispatchEvent(new Event("change"))}e.querySelector(".tpb-form-control.variant").style.display="block"}else e.querySelector("select.tpb-select-option-1").dispatchEvent(new Event("change")),e.querySelector(".tpb-form-control.variant").style.display="none"},buildSingleOptionSelector:function(e,t,a,l){e.querySelector("label.tpb-label-option"+l).innerHTML=t[l-1].name,e.querySelector(".tpb-form-control-option.tpb-option-"+l).style.display="block";const i=t[l-1].values.map((e=>({text:e.replace(/"/g,"&quot;"),value:e}))),n=e.querySelector("select.tpb-select-option-"+l);a[l]&&a[l].destroy(),a[l]=new o.Z({select:n,data:i}),n.dispatchEvent(new Event("change"))},buildLocationSelector:function(e,t,a,l){let i=t&&this.configs.locations.filter((e=>t.location_ids.includes(e.id)));i||(i=e&&this.configs.locations.filter((t=>e.location_ids.includes(t.id)))),i=i.map((e=>({text:e.name,value:e.id}))),a.location&&(a.location.set(""),a.location.destroy()),a.location=new o.Z({select:l,placeholder:this.trans.location_placeholder,data:[{placeholder:!0,text:this.trans.location_placeholder,value:""},...i]}),1!=i.length&&!1!==this.settings.general.show_location_on_front_store||a.location.set(i[0].value),!1!==this.settings.general.show_location_on_front_store&&"1"==this.settings.general.multipleLocations&&(l.parentNode.style.display="block")},buildEmployeeSelector:function(e,t,a){let i=this.configs.employees.filter((t=>e.employee_ids.includes(t.id))).sort((function(e,t){return e.first_name<t.first_name?-1:e.first_name>t.first_name?1:0}));if(!i)return;const n=i.map((e=>({text:e.first_name+" "+e.last_name,id:e.id,value:e.id})));t.employee&&(t.employee.set(""),t.employee.destroy()),t.employee=new o.Z({select:a,data:[{placeholder:!0,text:this.trans.employee_placeholder,value:""},...n]}),1==n.length&&t.employee.set(n[0].value);const s=(0,l.V$)(a,"tpb-form");1==n.length&&this.settings.general.hide_employee_on_front_store?(a.parentNode.style.display="none",s&&s.classList.add("should_hide_employee_at_step3")):(a.parentNode.style.display="block",s&&s.classList.remove("should_hide_employee_at_step3")),a.dispatchEvent(new Event("change"))},getAvailableCapacity:function(e){const t=e.querySelector('[name="productId"]').value,a=this.configs.products.find((e=>e.id==t)),l=a&&a.capacity;let i=0;if(l&&("product"==l.type&&(i=parseInt(l.rule)-1),"variant"==l.type&&(i=parseInt(l.rule[this.selectedVariant&&this.selectedVariant.id])-1)),this.selectedVariant&&"shopify"==this.selectedVariant.inventory_management&&"deny"==this.selectedVariant.inventory_policy){const e=this.selectedVariant.inventory_quantity;e>1&&e-1<i&&(i=e-1),e<=1&&(i=0)}return i},autoNextStep:function(e,t){let a=e?.delay_nextStep?e.delay_nextStep:1500;if(e?.auto_continue_step&&t&&"none"!=t.getAttribute("display")){const e=setTimeout((async function(){await t.click(),clearTimeout(e)}),a)}},hideDropdownService:function(e,t){if(e?.hide_service_dropdown&&e?.hide_service_dropdown_name){switch(e.hide_service_dropdown_name[0]){case"0":t.classList.add("hideDropdown");break;case"1":t.classList.add("hideDropdown","hideServiceName");break;case"2":t.classList.add("hideDropdownIcon")}e?.hide_title?t.classList.add("hideTitle"):t.classList.remove("hideTitle")}else t.classList.remove("hideDropdown","hideServiceName","hideDropdownIcon","hideTitle")},tooglePriceBooking:function(e,t){e?.hide_price_booking?t.classList.add("hidePrice"):t.classList.remove("hidePrice")}}}}]);